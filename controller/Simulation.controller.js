"use strict";sap.ui.define(["sap/ui/model/json/JSONModel","./BaseController","../util/game/SimulationGame"],function(t,e,n){"use strict";function i(t){return t&&t.__esModule&&typeof t.default!=="undefined"?t.default:t}const s=i(e);const o=i(n);const a=s.extend("com.game.toep.controller.Simulation",{constructor:function t(){s.prototype.constructor.apply(this,arguments);this.aiWins=[];this.onRouteMatched=()=>{const t=this.getSimulationConfig();const e=this.getModel("viewModel");t.AIs.forEach(t=>{this.aiWins.push({key:t.key,name:t.name,wins:0})});e.setProperty("/aiWins",this.aiWins);this.runGames().then(()=>{this.calculateWinPercentages();e.setProperty("/simulating",false);e.setProperty("/aiWins",this.aiWins);console.log(this.aiWins)}).catch(t=>{console.error(t)})};this.setupSimulationGame=t=>{const e=new o;e.setup(t);return e}},onInit:function e(){this.getRouter().getRoute("simulation").attachPatternMatched(this.onRouteMatched,this);const n=new t({completedRuns:0,targetRuns:1e3,simulating:true,aiWins:[]});this.setModel(n,"viewModel")},calculateWinPercentages:function t(){const e=this.aiWins.reduce((t,e)=>t+e.wins,0);this.aiWins.forEach(t=>{const n=t.wins/e*100;t.percentage=Math.round(n*100)/100})},updateWinCount:function t(e){this.aiWins[e-1].wins++},runGames:async function t(){const e=this.getModel("viewModel");for(let t=0;t<1e3;t++){const n=this.getSimulationConfig();const i=this.setupSimulationGame(n);const s=await i.startGame();this.updateWinCount(s.id);e.setProperty("/completedRuns",t+1)}},getSimulationConfig:function t(){return{key:1,title:"Simulation",subtitle:"",minimumBet:0,minimumToPlay:0,AIDescription:"",AIs:[{key:1,name:"Random AI 1",AI:"RandomAI"},{key:2,name:"Random AI 2",AI:"RandomAI"},{key:3,name:"Feeble Mind AI",AI:"FeebleMindAI"},{key:4,name:"Reasoning AI",AI:"ReasoningAI"}]}}});return a});
//# sourceMappingURL=Simulation.controller.js.map